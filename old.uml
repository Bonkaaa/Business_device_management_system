@startuml
skinparam classAttributeIconSize 0
skinparam linetype ortho

' =================================================
' 1. ENUMS
' =================================================
enum DeviceStatus {
    AVAILABLE
    ASSIGNED
    MAINTENANCE
    OUT_OF_SERVICE
}

enum DeviceCategory {
    LAPTOP
    DESKTOP
    PRINTER
}

enum AssignmentStatus {
    ACTIVE
    CLOSED
    OVERDUE
}

enum MaintenanceStatus {
    IN_PROGRESS
    RESOLVED
}

' =================================================
' 2. ASSIGNEE (ABSTRACTION & POLYMORPHISM)
' =================================================
abstract class Assignee {
    # id: String
    + name: String

    + Assignee(id: String, name: String)
    + {abstract} get_contact_info(): String
    + {abstract} get_assignee_type(): String
    + {abstract} assign_device()
    + {abstract} unassign_device()
    + getId(): String
    + getName(): String
    + get_assigned_device(): List
}

class Employee extends Assignee {
    + email: String
    + phone_number: String
    # position: String

    + getContactInfo(): String
    + assign_device(): Bool
    + unassign_device(): Bool
}

class Department extends Assignee {
    - location: String
    - managerName: String

    + get_contact_info(): String
    + get_assignee_type(): String
}

' =================================================
' 3. CORE ENTITY: DEVICE
' =================================================
class Device {
    # deviceId: String
    - name: String
    - category: String
    - status: DeviceStatus
    - purchaseDate: Date
    - specifications: Dict

    + isAvailable(): Boolean
    + updateStatus(status: DeviceStatus): void
    + getSpecifications(): Dict
}

' =================================================
' 4. AGGREGATE ROOTS (MANAGERS / SERVICES)
' =================================================

class Inventory {
    - devices: List<Device>

    + importDevice(device: Device): void
    + searchDevice(keyword: String): List<Device>
    + getAvailableDevices(category: DeviceCategory): List<Device>
}

class AssignmentManager {
    - assignments: List<Assignment>

    + assignDevice(device: Device, assignee: Assignee, expectedReturn: Date): Assignment
    + returnDevice(assignmentId: String, condition: String): void
    + getOverdueAssignments(): List<Assignment>
}

class MaintenanceManager {
    - tickets: List<MaintenanceTicket>

    + createTicket(device: Device, reporter: Employee, desc: String): MaintenanceTicket
    + updateTicketStatus(ticketId: String, status: TicketStatus): void
    + closeTicket(ticketId: String, cost: Double): void
    + getTicketsByStatus(status: TicketStatus): List<MaintenanceTicket>
}

' =================================================
' 5. TRANSACTION ENTITIES
' =================================================
class Assignment {
    - assignmentId: String
    - startDate: Date
    - expectedReturnDate: Date
    - actualReturnDate: Date
    - returnCondition: String
    - status: AssignmentStatus
    - note: String

    - device: Device
    - assignee: Assignee

    + close(condition: String): void
    + isOverdue(): Boolean
}

class MaintenanceTicket {
    - ticketId: String
    - issueDescription: String
    - cost: Double
    - status: TicketStatus

    - device: Device
    - reporter: Employee

    + updateStatus(status: TicketStatus): void
}

' =================================================
' 6. RELATIONSHIPS
' =================================================

Inventory "1" *-- "*" Device : manages >

AssignmentManager "1" *-- "*" Assignment : manages >
MaintenanceManager "1" *-- "*" MaintenanceTicket : manages >

Assignment "*" --> "1" Device
Assignment "*" --> "1" Assignee

MaintenanceTicket "*" --> "1" Device
MaintenanceTicket "*" --> "1" Employee : reported by >

@enduml
